# 前置知识

- DF Don't Fragment：表示是否可以分片，为0表示可以分片，1表示不可以
- MF More Fragment：表示是否还有分片，为1表示还有，为0表示没有
- 片偏移：以8个字节为一个单位

# 例题

[IP数据报分片总结_DrCrypto的博客-CSDN博客](https://blog.csdn.net/u011240016/article/details/52799673)

> 一个长4000B的IP数据报，数据部分3980B,到达了一个路由，需要转发到一个MTU为1500B的链路上，这样就得分片了。分片数目是3片。每个片都是一个数据报。假设标识是777，那么数据报分片结果是：
>
> 分片一：标识：777，MF=1，DF=0,片偏移=0，有效数据：1480B(编号0~1479)
> 分片二：标识：777，MF=1,DF=0,片偏移=185，185*8=1480，有效数据：1480B(编号1480~2959)
> 分片三：标识：777，MF=0,DF=0,片偏移370，370*8=2960，有效数据：1020B(编号2960~3979)

解题步骤：

| 数据报分片   | 总长度 | MF | DF | 片偏移字段             |
| ------------ | ------ | -- | -- | ---------------------- |
| 原始数据报文 | 4000   | 0  | 0  | 0                      |
| 分片1        | 1500   | 1  | 0  | 0                      |
| 分片2        | 1500   | 1  | 0  | $\frac{1480}{8}=185$ |
| 分片3        | 1040   | 0  | 0  | $\frac{2960}{8}=370$   |
