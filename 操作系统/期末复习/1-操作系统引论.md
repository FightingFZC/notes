# 操作系统介绍

## 定义

操作系统是一组用于控制和管理计算机系统硬件和软件资源/合理地对各类作业进行调度,以及方便用户使用的程序集合.

## 地位

操作系统是裸机之上的第一层**系统软件**,是建立其他所有软件的基础.他是整个系统的控制管理中心,既管硬件,又管软件,他为其他软件提供运行环境

## 基本特征

- **并发**:是指两个或者多个活动在同一给定的时间间隔中进行
  - **并行**:同一时间段运行
- **共享**:是指计算机系统中的资源被多个进程所共用
- **异步**:进程以不可预知的速度向前推进
- **虚拟**:把物理上的实体变成若干个逻辑上的对应物

> **最基本特征**:**并发,共享**(两者互为存在条件)

## 主要功能

1. **处理机管理**:主要功能包括进程控制,进程同步,进程通信,死锁处理,处理机调度
2. **存储器管理**:主要包括内存分配,地址映射,内存保护与共享和内存扩充等功能
3. **文件管理**:包括文件存储空间的管理,目录管理及文件读写管理和保护等
4. **设备管理**:主要包括缓冲管理,设备分配,设备处理和虚拟设备等功能
5. **作业管理**:作业是指独立的、要求计算机完成的一个任务。操作系统的作业管理功能包括两点是在多道程序运行IC现货商时，使得备用户合理地共享计算机系统资源是提供给操作人员一套控制命令用来控制程序的运行

## 发展

1. 手工操作阶段(无操作系统)
   1. 缺点是人机速度矛盾
2. 批处理阶段(操作系统开始出现)
   1. 单道批处理阶段
   2. 多道批处理阶段(操作系统正式诞生)
      1. 目的提高系统的资源利用率
      2. 优点是资源利用率高
      3. 缺点是不支持人机交互
3. 分时操作系统
   1. 优点是提供了人机交互
   2. 缺点是不可以插队,不能优先处理紧急事务
4. 实时操作系统
   1. 硬实时系统:必须在被控制的时间内完成(火箭发射)
   2. 软实时系统:可以松一些(订票)
   3. 实时操作系统的优点是可以优先处理紧急任务
5. 从可靠性来讲实时操作系统更强,从交互性来讲分时操作系统更好

# 不得不知的概念

## 两种指令

1. 特权指令:不允许用户程序使用(值允许操作系统使用).如IO指令,置中断指令
2. 非特权指令:普通的运算指令

## 两种程序

1. 内核程序:系统的管理者,可执行一切指令,运行在核心态
2. 应用程序:普通用户程序只能执行非特权指令,运行在用户态

## 处理机状态

1. 用户态(目态):CPU只能执行非特权指令
2. 核心态(管态,内核态):可以执行所有指令
3. 用户态到核心态:通过中断(是硬件完成的)
4. 核心态到用户态:特权指令psw的标志位0用户态1核心态

> 常考谁在用户态执行,谁再核心态执行

## 原语

1. 处于操作系统的最低层,是最接近硬件的部分
2. 这些程序的运行具有原子性,其操作只能一气呵成
3. 这些程序的运行时间都较短,而且调用频繁

## 中断和异常

1. 内中断:异常,信号都来自内部
   1. 自愿中断------指令中断
   2. 强迫中断
      1. 硬件中断
      2. 软件中断
2. 外中断:中断,信号来自外部

> Q:如果一个软件崩溃导致中断,这里是是内中断还是内中断?
>
> A:属于软件中断,所以是内中断

## 系统调用

**系统给程序员(应用程序)提供的唯一接口**,可以获得OS的服务,在用户态发生,核心态处理

## 体系机构

1. 大内核
2. 微内核
